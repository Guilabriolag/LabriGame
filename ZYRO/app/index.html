<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>ZYRO v0.2 - Sobreviv√™ncia Espacial</title>
    <style>
        body {
            box-sizing: border-box; [cite: 320]
        }
        
        html, body {
            margin: 0; [cite: 321]
            padding: 0; [cite: 322]
            overflow: hidden;
            height: 100%;
            width: 100%;
            background: #222;
            touch-action: none;
            font-family: 'Orbitron', Arial, sans-serif; [cite: 322]
        }

        canvas {
            display: block; [cite: 323]
            background: #4caf50; [cite: 324]
        }

        #hud {
            position: absolute;
            top: env(safe-area-inset-top, 10px); [cite: 325]
            left: 10px;
            color: white;
            font: bold 14px Arial;
            background: rgba(0, 0, 0, 0.8);
            padding: 8px 12px;
            border-radius: 10px; [cite: 326]
            border: 2px solid #00bfff;
            box-shadow: 0 0 10px rgba(0, 191, 255, 0.3);
            z-index: 100; [cite: 327]
        }

        #survival-hud {
            position: absolute; [cite: 327]
            top: env(safe-area-inset-top, 10px); [cite: 328]
            right: 10px;
            background: rgba(0, 0, 0, 0.9);
            color: white;
            padding: 10px;
            border-radius: 10px;
            border: 2px solid #00bfff;
            font: 12px Arial; [cite: 329]
            z-index: 100;
        }

        .survival-bar {
            width: 100px; [cite: 330]
            height: 8px; [cite: 330]
            background: rgba(255, 255, 255, 0.2);
            border-radius: 4px;
            margin: 3px 0;
            overflow: hidden; [cite: 331]
        }

        .survival-fill {
            height: 100%; [cite: 332]
            transition: width 0.3s ease; [cite: 332]
        }

        .hunger { background: linear-gradient(90deg, #ff6b35, #f7931e); [cite: 333]
        }
        .thirst { background: linear-gradient(90deg, #4fc3f7, #29b6f6); [cite: 334]
        }
        .oxygen { background: linear-gradient(90deg, #66bb6a, #43a047); [cite: 335]
        }
        .energy { background: linear-gradient(90deg, #ffa726, #ff9800); [cite: 336]
        }

        #joystick {
            position: absolute;
            bottom: calc(80px + env(safe-area-inset-bottom, 0)); [cite: 337]
            left: 30px;
            width: 120px;
            height: 120px; [cite: 338]
            background: radial-gradient(circle, rgba(0, 191, 255, 0.3), rgba(0, 191, 255, 0.1));
            border: 3px solid rgba(0, 191, 255, 0.6);
            border-radius: 50%; [cite: 339]
            touch-action: none; [cite: 339]
        }

        #stick {
            position: absolute; [cite: 340]
            left: 50%;
            top: 50%;
            width: 50px;
            height: 50px;
            background: linear-gradient(135deg, #00bfff, #0080ff);
            border: 2px solid white;
            border-radius: 50%;
            transform: translate(-50%, -50%); [cite: 341]
            box-shadow: 0 0 10px rgba(0, 191, 255, 0.6); [cite: 342]
        }

        .button {
            position: absolute; [cite: 343]
            width: 60px;
            height: 60px;
            border-radius: 50%;
            color: white;
            font: bold 18px Arial;
            text-align: center;
            line-height: 60px; [cite: 344]
            background: rgba(0, 0, 0, 0.8); [cite: 344]
            border: 3px solid;
            touch-action: none;
            cursor: pointer;
            transition: all 0.2s ease; [cite: 345]
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.5); [cite: 345]
        }

        .button:active {
            transform: scale(0.95); [cite: 346]
            box-shadow: 0 0 15px; [cite: 346]
        }

        #buttonA {
            bottom: calc(80px + env(safe-area-inset-bottom, 0));
            right: 140px; [cite: 347]
            background: linear-gradient(135deg, #dc2626, #991b1b);
            border-color: #ef4444;
        }

        #buttonB {
            bottom: calc(150px + env(safe-area-inset-bottom, 0)); [cite: 348]
            right: 70px;
            background: linear-gradient(135deg, #2563eb, #1d4ed8);
            border-color: #3b82f6;
        }

        #buttonC {
            bottom: calc(80px + env(safe-area-inset-bottom, 0)); [cite: 349]
            right: 70px;
            background: linear-gradient(135deg, #16a34a, #15803d);
            border-color: #22c55e;
        }

        #buttonD {
            bottom: calc(150px + env(safe-area-inset-bottom, 0)); [cite: 350]
            right: 140px;
            background: linear-gradient(135deg, #ea580c, #c2410c);
            border-color: #f97316;
        }

        .interface-panel {
            position: absolute; [cite: 351]
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #0f172a, #1e293b);
            color: white;
            display: none;
            z-index: 1000;
            overflow-y: auto; [cite: 352]
        }

        .interface-header {
            background: linear-gradient(90deg, #0ea5e9, #0284c7); [cite: 353]
            padding: 15px; [cite: 353]
            text-align: center;
            font: bold 18px Arial;
            border-bottom: 3px solid #00bfff; [cite: 354]
        }

        .interface-content {
            padding: 20px; [cite: 355]
        }

        .status-grid {
            display: grid; [cite: 356]
            grid-template-columns: 1fr 1fr; [cite: 356]
            gap: 15px;
            margin-bottom: 20px;
        }

        .status-card {
            background: rgba(0, 0, 0, 0.5); [cite: 357]
            padding: 15px; [cite: 357]
            border-radius: 10px;
            border: 2px solid #00bfff;
        }

        .status-card h3 {
            margin: 0 0 10px 0; [cite: 358]
            color: #00bfff; [cite: 358]
            font-size: 14px;
        }

        .equipment-slot {
            background: rgba(255, 255, 255, 0.1); [cite: 359]
            border: 2px dashed #666; [cite: 359]
            border-radius: 8px;
            padding: 20px;
            text-align: center;
            margin: 10px 0;
            cursor: pointer;
            transition: all 0.3s ease; [cite: 360]
        }

        .equipment-slot.equipped {
            border-color: #00ff00; [cite: 361]
            background: rgba(0, 255, 0, 0.1); [cite: 361]
        }

        .inventory-grid {
            display: grid; [cite: 362]
            grid-template-columns: repeat(5, 1fr); [cite: 362]
            gap: 5px;
            margin: 15px 0;
        }

        .inventory-slot {
            aspect-ratio: 1; [cite: 363]
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid #666;
            border-radius: 5px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px; [cite: 364]
            cursor: pointer;
        }

        .inventory-slot.filled {
            border-color: #00bfff; [cite: 365]
            background: rgba(0, 191, 255, 0.2); [cite: 365]
        }

        .action-button {
            background: linear-gradient(135deg, #00bfff, #0080ff); [cite: 366]
            border: none;
            color: white;
            padding: 12px 20px;
            border-radius: 8px;
            font: bold 14px Arial;
            cursor: pointer;
            margin: 5px; [cite: 367]
            transition: all 0.3s ease; [cite: 367]
        }

        .action-button:hover {
            transform: translateY(-2px); [cite: 368]
            box-shadow: 0 5px 15px rgba(0, 191, 255, 0.4); [cite: 368]
        }

        .close-button {
            position: absolute; [cite: 369]
            top: 15px;
            right: 15px;
            background: #dc2626;
            border: none;
            color: white;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            font: bold 20px Arial; [cite: 370]
            cursor: pointer;
        }

        #farming-interface {
            background: linear-gradient(135deg, #166534, #15803d); [cite: 371]
        }

        .farming-grid {
            display: grid; [cite: 372]
            grid-template-columns: repeat(4, 1fr); [cite: 372]
            gap: 10px;
            margin: 20px 0;
        }

        .farming-plot {
            aspect-ratio: 1; [cite: 373]
            background: #8b4513;
            border: 3px solid #654321;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 30px;
            cursor: pointer;
            position: relative; [cite: 374]
        }

        .farming-plot.planted {
            background: #228b22; [cite: 375]
            border-color: #32cd32; [cite: 375]
        }

        .farming-plot.ready {
            background: #ffd700; [cite: 376]
            border-color: #ffff00; [cite: 376]
            animation: glow 2s ease-in-out infinite alternate;
        }

        @keyframes glow {
            from { box-shadow: 0 0 5px #ffff00; [cite: 377]
            }
            to { box-shadow: 0 0 20px #ffff00; [cite: 378]
            }
        }

        @keyframes fadeMessage {
            0% { opacity: 0; [cite: 379]
            transform: translateX(-50%) translateY(-20px); }
            20%, 80% { opacity: 1; [cite: 380]
            transform: translateX(-50%) translateY(0); }
            100% { opacity: 0; [cite: 381]
            transform: translateX(-50%) translateY(-20px); }
        }
    </style>
</head>
<body>
    <div id="hud">√Årea: Nave Danificada</div>
    <div id="survival-hud">
        <div>üçñ Fome: <div class="survival-bar"><div class="survival-fill hunger" style="width: 80%"></div></div></div>
        <div>üíß Sede: <div class="survival-bar"><div class="survival-fill thirst" style="width: 60%"></div></div></div>
        <div>ü´Å O¬≤: <div class="survival-bar"><div class="survival-fill oxygen" style="width: 90%"></div></div></div>
        <div>‚ö° Energia: <div class="survival-bar"><div class="survival-fill energy" style="width: 70%"></div></div></div>
    </div>

    <div id="joystick"><div id="stick"></div></div>
   
    <div id="buttonA" class="button">A</div> [cite: 382]
    <div id="buttonB" class="button">B</div>
    <div id="buttonC" class="button">C</div>
    <div id="buttonD" class="button">D</div>

    <div id="ship-interface" class="interface-panel">
        <button class="close-button" onclick="closeInterface('ship-interface')">&times;</button>
        <div class="interface-header">üöÄ NAVE DANIFICADA - SISTEMA DE MANUTEN√á√ÉO</div>
        <div class="interface-content">
            <div class="status-grid">
                <div class="status-card">
 
                    <h3>üìä Status Vital</h3> [cite: 383]
                    <div>Fome: <span id="hunger-text">80%</span></div>
                    <div>Sede: <span id="thirst-text">60%</span></div>
                    <div>Oxig√™nio: <span id="oxygen-text">90%</span></div>
             
                    <div>Energia: <span id="energy-text">70%</span></div> [cite: 384]
                </div>
                <div class="status-card">
                    <h3>üéí Equipamentos</h3>
                    <div class="equipment-slot" id="backpack-slot" onclick="equipBackpack()">
              
                    <div>Mochila: Nenhuma</div> [cite: 385]
                        <div style="font-size: 12px;">Clique para equipar</div>
                    </div>
                </div>
            </div>
            
 
            <div class="status-card"> [cite: 386]
                <h3>üì¶ Invent√°rio (<span id="inv-count">0</span>/<span id="inv-max">10</span>)</h3>
                <div class="inventory-grid" id="ship-inventory"></div>
            </div>
            
            <div style="text-align: center; [cite: 387]
            margin-top: 20px;">
                <button class="action-button" onclick="consumeItem('food')">üçñ Comer</button>
                <button class="action-button" onclick="consumeItem('water')">üíß Beber</button>
                <button class="action-button" onclick="rest()">üò¥ Descansar</button>
            </div>
        </div>
    </div>

    <div id="bunker-interface" class="interface-panel" style="background: linear-gradient(135deg, #166534, 
    #15803d);"> [cite: 388]
        <button class="close-button" onclick="closeInterface('bunker-interface')">&times;</button>
        <div class="interface-header">üè† BUNKER AGR√çCOLA - SISTEMA DE CULTIVO</div>
        <div class="interface-content">
            <div class="status-card">
                <h3>üå± Planta√ß√£o Hidrop√¥nica</h3>
                <div class="farming-grid" id="farming-plots"></div>
            </div>
     
        
            <div style="text-align: center; [cite: 390]
            margin-top: 20px;">
                <button class="action-button" onclick="plantCrop('potato')">ü•î Plantar Batata</button>
                <button class="action-button" onclick="plantCrop('oxygen-plant')">üåø Plantar O¬≤ Plant</button>
                <button class="action-button" onclick="waterPlants()">üíß Regar Plantas</button>
                <button class="action-button" onclick="harvestAll()">üåæ Colher Tudo</button>
            </div>
      
       
            <div class="status-card" style="margin-top: 20px;"> [cite: 391]
                <h3>üìä Recursos Dispon√≠veis</h3>
                <div>üíß √Ågua: <span id="water-count">0</span></div>
                <div>ü•î Sementes de Batata: <span id="potato-seeds">0</span></div>
                <div>üåø Mudas de O¬≤: <span 
                [cite_start]id="oxygen-seeds">0</span></div> [cite: 392]
            </div>
        </div>
    </div>

    <div id="workshop-interface" class="interface-panel">
        <button class="close-button" onclick="closeInterface('workshop-interface')">&times;</button>
        <div class="interface-header">üîß OFICINA DE CONSTRU√á√ÉO</div>
        <div class="interface-content" style="text-align:center;">
            <div class="status-card">
                <h3>üõ†Ô∏è 
                Receitas Dispon√≠veis</h3> [cite: 393]
                <p>üíä Kit M√©dico: 1 √Ågua + 1 Batata</p>
                <p>üåø Filtro de O¬≤: 1 Planta + 1 √Ågua</p>
                <p>‚ö° Painel Solar: Requer Mochila</p>
            </div>
            <button class="action-button" onclick="craftItem('medkit')">üíä Criar Kit M√©dico</button>
   
            <button class="action-button" onclick="craftItem('filter')">üåø Criar Filtro de O¬≤</button> [cite: 394]
            <button class="action-button" onclick="craftItem('solar')">‚ö° Montar Painel Solar</button>
        </div>
    </div>

    <canvas id="game"></canvas>

    <script>
        const canvas = document.getElementById("game"); [cite: 395]
        const ctx = canvas.getContext("2d"); [cite: 395]
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight; [cite: 396]
        // Configura√ß√£o do mundo
        const AREA_WIDTH = 1200, AREA_HEIGHT = 800; [cite: 397]
        // Player e sistema de sobreviv√™ncia
        let player = {
            x: 600,
            y: 400,
            r: 25,
            speed: 4,
            inventory: [],
            maxInventory: 10,
      
            backpack: null, [cite: 398]
            hunger: 80,
            thirst: 60,
            oxygen: 90,
            energy: 70,
            health: 100
        };
        // Recursos e equipamentos [cite: 399]
        let gameState = {
            water: 0,
            potatoSeeds: 2,
            oxygenSeeds: 1,
            farmingPlots: Array(16).fill(null),
            lastSurvivalUpdate: Date.now()
        };
        // Sistema de Miss√µes [cite: 400]
        let missions = [
            { id: 1, text: "Explore a Mina de √Ågua üíß", completed: false },
            { id: 2, text: "Colete 5 unidades de √Ågua üíß", completed: false },
            { id: 3, text: "Plante e colha uma Batata ü•î", completed: false },
            { id: 
            4, text: "Equipe uma Mochila üéí", completed: false }, [cite: 401]
            { id: 5, text: "Repare o M√≥dulo da Nave ‚ö°", completed: false }
        ];
        // Exibir painel lateral [cite: 402]
        const missionPanel = document.createElement("div");
        missionPanel.id = "mission-panel"; [cite: 403]
        missionPanel.style.cssText = `
            position: absolute;
            top: 10px;
            left: 50%; [cite: 404]
            transform: translateX(-50%); [cite: 404]
            background: rgba(0,0,0,0.7);
            border: 2px solid #00bfff;
            color: white;
            font: 12px Arial;
            border-radius: 10px;
            padding: 10px;
            z-index: 200;
            width: 220px; [cite: 405]
        `;
        document.body.appendChild(missionPanel);

        function updateMissions() {
            missionPanel.innerHTML = "<b>üìú Miss√µes</b><br>"; [cite: 406]
            let completedCount = 0; [cite: 406]
            missions.forEach(m => {
                if (m.completed) completedCount++;
                missionPanel.innerHTML += (m.completed ? "‚úÖ " : "üî∏ ") + m.text + "<br>";
            });
            missionPanel.innerHTML += `<hr>Progresso: ${completedCount}/${missions.length}`; [cite: 407]
        }

        // Pontos de interesse
        let pointsOfInterest = [
            {x: 600, y: 400, type: "ship", name: "Nave Danificada", icon: "üöÄ", color: "#ff6b35"},
            {x: 200, y: 200, type: "water", name: "Mina de √Ågua", icon: "üíß", color: "#4fc3f7"},
            {x: 1000, y: 200, type: "oxygen", name: "Ponto de O¬≤", icon: "üåø", color: 
            "#66bb6a"}, [cite: 408]
            {x: 200, y: 600, type: "bunker", name: "Bunker Agr√≠cola", icon: "üè†", color: "#8b4513"},
            {x: 1000, y: 600, type: "equipment", name: "Equipamentos", icon: "üéí", color: "#ffa726"},
            {x: 600, y: 700, type: "workshop", name: "Oficina", icon: "üîß", color: "#9ca3af"}
        ];
        // Criaturas Alien√≠genas [cite: 409]
        let enemies = [
            { x: 400, y: 300, hp: 30, maxHp: 30, active: true, lastAttack: 0 },
            { x: 900, y: 500, hp: 30, maxHp: 30, active: true, lastAttack: 0 }
        ];
        function drawEnemies() { [cite: 410]
            enemies.forEach(e => {
                if (!e.active) return;
                
                // Seguir o jogador
                const dx = player.x - e.x;
          
                const dy = player.y - e.y; [cite: 411]
                const dist = Math.sqrt(dx*dx + dy*dy);
                
                if (dist < 200) {
                    e.x += dx / dist * 0.5;
      
                    e.y += dy / dist * 0.5; [cite: 412]
                    
                    // Atacar se pr√≥ximo
                    if (dist < 50 && Date.now() - e.lastAttack > 2000) {
       
                        player.health = Math.max(0, player.health - 10); [cite: 413]
                        e.lastAttack = Date.now();
                        showMessage("üëæ Criatura alien√≠gena atacou!");
                        if 
                        (navigator.vibrate) navigator.vibrate([100, 50, 100]); [cite: 414]
                    }
                }
                
                // Desenhar alien
                ctx.fillStyle = "#8b0000";
         
                ctx.beginPath(); [cite: 415]
                ctx.arc(e.x, e.y, 20, 0, Math.PI * 2);
                ctx.fill();
                ctx.strokeStyle = "#ff0000"; [cite: 416]
                ctx.lineWidth = 2; [cite: 416]
                ctx.stroke();
                
                // Barra de HP
                ctx.fillStyle = "rgba(0, 0, 0, 0.7)"; [cite: 417]
                ctx.fillRect(e.x - 25, e.y - 35, 50, 8);
                ctx.fillStyle = "#ff0000"; [cite: 418]
                ctx.fillRect(e.x - 23, e.y - 33, (e.hp / e.maxHp) * 46, 4); [cite: 418]
                // Olhos amarelos
                ctx.fillStyle = "#ffff00"; [cite: 419]
                ctx.beginPath(); [cite: 420]
                ctx.arc(e.x - 8, e.y - 5, 3, 0, Math.PI * 2); [cite: 421]
                ctx.arc(e.x + 8, e.y - 5, 3, 0, Math.PI * 2);
                ctx.fill();
            }); [cite: 422]
        }

        // C√¢mera
        let cam = { x: 0, y: 0 }; [cite: 423]
        // Ciclo de Dia e Noite
        let timeOfDay = 12; [cite: 423]
        // 0‚Äì24

        function updateDayCycle() {
            timeOfDay = (timeOfDay + 0.01) % 24; [cite: 424]
            const isNight = timeOfDay >= 18 || timeOfDay < 6; [cite: 425]
            // Ajustar brilho
            const brightness = isNight ? [cite: 426]
            0.6 : 1; [cite: 427]
            canvas.style.filter = `brightness(${brightness})`;
            
            // Efeitos noturnos
            if (isNight && Math.random() < 0.001) {
                showMessage("üåí A noite cai... o frio aumenta.");
                player.energy = Math.max(0, player.energy - 2); [cite: 428]
            }
        }

        // Controles do joystick
        const joystick = document.getElementById("joystick"); [cite: 429]
        const stick = document.getElementById("stick"); [cite: 429]
        let joy = { active: false, x: 0, y: 0 }; [cite: 430]
        joystick.addEventListener("touchstart", e => {
            e.preventDefault();
            joy.active = true;
            if (navigator.vibrate) navigator.vibrate(10); [cite: 430]
        });
        joystick.addEventListener("touchend", e => {
            e.preventDefault();
            joy.active = false;
            stick.style.left = "50%";
            stick.style.top = "50%";
            joy.x = 0;
            joy.y = 0; [cite: 431]
        });
        joystick.addEventListener("touchmove", e => {
            e.preventDefault();
            if (!joy.active) return;
            
            const rect = joystick.getBoundingClientRect();
            const touch = e.touches[0];
            let dx = touch.clientX - (rect.left + rect.width / 2);
        
            let dy = touch.clientY - (rect.top + rect.height / 2); [cite: 433]
            const dist = Math.min(Math.sqrt(dx * dx + dy * dy), rect.width / 2);
            const angle = Math.atan2(dy, dx);
            
            stick.style.left = rect.width / 2 + dist * Math.cos(angle) + "px";
            stick.style.top 
            = rect.height / 2 + dist * Math.sin(angle) + "px"; [cite: 434]
            joy.x = Math.cos(angle) * (dist / (rect.width / 2));
            joy.y = Math.sin(angle) * (dist / (rect.width / 2));
        });
        // Fun√ß√£o de ataque [cite: 435]
        function attackNearestEnemy() {
            const nearest = enemies.find(e => e.active && Math.hypot(player.x - e.x, player.y - e.y) < 100); [cite: 435]
            if (nearest) { [cite: 436]
                nearest.hp -= 15; [cite: 437]
                showMessage("üí• Ataque alien√≠gena!"); [cite: 437]
                if (navigator.vibrate) navigator.vibrate(30);
                if (nearest.hp <= 0) {
                    nearest.active = false; [cite: 438]
                    showMessage("üëæ Inimigo derrotado! +1 recurso raro"); [cite: 438]
                    if (player.inventory.length < player.maxInventory) {
                        player.inventory.push("üíé"); [cite: 439]
                    }
                }
                return true; [cite: 440]
            }
            return false; [cite: 441]
        }

        // Bot√µes de a√ß√£o
        document.getElementById("buttonA").addEventListener("touchstart", e => {
            e.preventDefault();
            if (navigator.vibrate) navigator.vibrate(20);
            if (!attackNearestEnemy()) {
                interactWithNearestPOI();
            } [cite: 441]
        });
        document.getElementById("buttonB").addEventListener("touchstart", e => {
            e.preventDefault();
            if (navigator.vibrate) navigator.vibrate(15);
            showMessage("üì¶ Invent√°rio: " + player.inventory.length + "/" + player.maxInventory); [cite: 442]
        });
        document.getElementById("buttonC").addEventListener("touchstart", e => {
            e.preventDefault();
            if (navigator.vibrate) navigator.vibrate(15);
            showMessage("üó∫Ô∏è Mapa: NaveüöÄ √Åguaüíß O¬≤üåø Bunkerüè† Equipüéí Oficinaüîß"); [cite: 443]
        });
        document.getElementById("buttonD").addEventListener("touchstart", e => {
            e.preventDefault();
            if (navigator.vibrate) navigator.vibrate([10, 50, 10]);
            scanArea(); [cite: 444]
        });
        // Fun√ß√µes de intera√ß√£o
        function interactWithNearestPOI() { [cite: 445]
            let nearestPOI = null;
            let minDistance = Infinity; [cite: 446]
            
            pointsOfInterest.forEach(poi => {
                let dx = player.x - poi.x;
                let dy = player.y - poi.y;
                let distance = Math.sqrt(dx * dx + dy * dy);
                
           
                if (distance < 80 && distance < minDistance) { [cite: 447]
                    minDistance = distance;
                    nearestPOI = poi;
                }
            });
            if (nearestPOI) { [cite: 448]
                handlePOIInteraction(nearestPOI); [cite: 449]
            } else {
                showMessage("‚ùå Nenhum ponto de interesse pr√≥ximo"); [cite: 450]
            }
        }

        function handlePOIInteraction(poi) {
            switch(poi.type) {
                case "ship":
                    document.getElementById("ship-interface").style.display = "block";
                    updateShipInterface(); [cite: 451]
                    break;
                    
                case "water":
                    if (player.inventory.length < player.maxInventory) {
                        gameState.water += 3; [cite: 452]
                        player.inventory.push("üíß"); [cite: 452]
                        showMessage("üíß Coletou 3 unidades de √°gua!");
                        missions[0].completed = true; [cite: 453]
                        // Explorou a mina
                        if (gameState.water >= 5) missions[1].completed = true; [cite: 454]
                        // Coletou 5 √°guas
                        updateMissions();
                        if (navigator.vibrate) navigator.vibrate(30); [cite: 455]
                    } else {
                        showMessage("‚ùå Invent√°rio cheio!"); [cite: 456]
                    }
                    break;
                case "oxygen": [cite: 457]
                    if (player.inventory.length < player.maxInventory) {
                        gameState.oxygenSeeds += 2; [cite: 458]
                        player.inventory.push("üåø"); [cite: 458]
                        player.oxygen = Math.min(100, player.oxygen + 20);
                        showMessage("üåø Coletou mudas de O¬≤ e respirou ar puro!");
                        if (navigator.vibrate) navigator.vibrate(30); [cite: 459]
                    } else {
                        showMessage("‚ùå Invent√°rio cheio!"); [cite: 460]
                    }
                    break;
                case "bunker": [cite: 461]
                    document.getElementById("bunker-interface").style.display = "block";
                    updateBunkerInterface(); [cite: 462]
                    break;
                    
                case "equipment":
                    if (!player.backpack && player.inventory.length < player.maxInventory) {
                        player.inventory.push("üéí"); [cite: 463]
                        showMessage("üéí Encontrou uma mochila! Use na nave para equipar.");
                        if (navigator.vibrate) navigator.vibrate(30); [cite: 464]
                    } else if (player.backpack) {
                        showMessage("‚úÖ Voc√™ j√° tem uma mochila equipada!"); [cite: 465]
                    } else {
                        showMessage("‚ùå Invent√°rio cheio!"); [cite: 466]
                    }
                    break;
                case "workshop": [cite: 467]
                    document.getElementById("workshop-interface").style.display = "block";
                    break; [cite: 468]
            }
        }

        function scanArea() {
            let nearbyPOIs = []; [cite: 469]
            let nearbyEnemies = 0; [cite: 469]
            
            pointsOfInterest.forEach(poi => {
                let dx = player.x - poi.x;
                let dy = player.y - poi.y;
                let distance = Math.sqrt(dx * dx + dy * dy);
                
           
                if (distance < 200) { [cite: 470]
                    nearbyPOIs.push(poi.name); [cite: 474]
                }
            });
            enemies.forEach(e => { [cite: 471]
                if (e.active) {
                    let dx = player.x - e.x;
                    let dy = player.y - e.y;
                    let distance = Math.sqrt(dx * dx + dy * dy);
 
                    
                    if (distance < 200) { [cite: 472]
                        nearbyEnemies++;
                    }
             
                } [cite: 473]
            });
            let message = "üîç Detectado: "; [cite: 474]
            if (nearbyPOIs.length > 0) {
                message += nearbyPOIs.join(", "); [cite: 475]
            }
            if (nearbyEnemies > 0) {
                message += (nearbyPOIs.length > 0 ? ", " : "") + `${nearbyEnemies} inimigo(s)`; [cite: 476]
            }
            if (nearbyPOIs.length === 0 && nearbyEnemies === 0) {
                message = "üîç Nenhum ponto de interesse detectado"; [cite: 477]
            }
            
            showMessage(message); [cite: 478]
        }

        // Fun√ß√µes da interface da nave
        function updateShipInterface() {
            document.getElementById("hunger-text").textContent = Math.round(player.hunger) + "%"; [cite: 479]
            document.getElementById("thirst-text").textContent = Math.round(player.thirst) + "%";
            document.getElementById("oxygen-text").textContent = Math.round(player.oxygen) + "%";
            document.getElementById("energy-text").textContent = Math.round(player.energy) + "%";
            document.getElementById("inv-count").textContent = player.inventory.length; [cite: 480]
            document.getElementById("inv-max").textContent = player.maxInventory; [cite: 480]
            
            // Atualizar slot da mochila
            const backpackSlot = document.getElementById("backpack-slot"); [cite: 481]
            if (player.backpack) {
                backpackSlot.className = "equipment-slot equipped"; [cite: 482]
                backpackSlot.innerHTML = "<div>Mochila: Equipada ‚úÖ</div><div style='font-size: 12px;'>+5 slots de invent√°rio</div>"; [cite: 483]
            }
            
            // Atualizar invent√°rio visual
            const inventoryGrid = document.getElementById("ship-inventory"); [cite: 484]
            inventoryGrid.innerHTML = "";
            for (let i = 0; i < player.maxInventory; i++) {
                const slot = document.createElement("div"); [cite: 485]
                slot.className = "inventory-slot"; [cite: 485]
                if (i < player.inventory.length) {
                    slot.className += " filled"; [cite: 486]
                    slot.textContent = player.inventory[i]; [cite: 486]
                }
                inventoryGrid.appendChild(slot); [cite: 487]
            }
        }

        function equipBackpack() {
            const backpackIndex = player.inventory.indexOf("üéí"); [cite: 488]
            if (backpackIndex !== -1 && !player.backpack) {
                player.inventory.splice(backpackIndex, 1); [cite: 489]
                player.backpack = "equipped"; [cite: 489]
                player.maxInventory = 15;
                missions[3].completed = true; // Equipou mochila
                updateMissions(); [cite: 490]
                showMessage("üéí Mochila equipada! +5 slots de invent√°rio"); [cite: 490]
                updateShipInterface();
            } else if (player.backpack) {
                showMessage("‚úÖ Mochila j√° equipada!"); [cite: 491]
            } else {
                showMessage("‚ùå Voc√™ precisa de uma mochila no invent√°rio!"); [cite: 492]
            }
        }

        function consumeItem(type) {
            let consumed = false; [cite: 493]
            if (type === "food") {
                const foodIndex = player.inventory.findIndex(item => ["üçñ", "ü•î", "üçû"].includes(item)); [cite: 494]
                if (foodIndex !== -1) { [cite: 494]
                    player.inventory.splice(foodIndex, 1); [cite: 495]
                    player.hunger = Math.min(100, player.hunger + 30); [cite: 495]
                    consumed = true;
                    showMessage("üçñ Comeu e recuperou fome!"); [cite: 496]
                }
            } else if (type === "water") {
                if (gameState.water > 0) {
                    gameState.water--; [cite: 497]
                    player.thirst = Math.min(100, player.thirst + 40); [cite: 497]
                    consumed = true;
                    showMessage("üíß Bebeu √°gua e recuperou sede!"); [cite: 498]
                }
            }
            
            if (!consumed) {
                showMessage("‚ùå Item n√£o dispon√≠vel!"); [cite: 499]
            } else {
                updateShipInterface();
                updateSurvivalHUD(); [cite: 500]
            }
        }

        function rest() {
            player.energy = Math.min(100, player.energy + 50); [cite: 501]
            showMessage("üò¥ Descansou e recuperou energia!"); [cite: 501]
            updateShipInterface();
            updateSurvivalHUD();
        }

        // Fun√ß√µes da interface do bunker
        function updateBunkerInterface() {
            document.getElementById("water-count").textContent = gameState.water; [cite: 502]
            document.getElementById("potato-seeds").textContent = gameState.potatoSeeds; [cite: 502]
            document.getElementById("oxygen-seeds").textContent = gameState.oxygenSeeds;
            
            const farmingGrid = document.getElementById("farming-plots");
            farmingGrid.innerHTML = ""; [cite: 503]
            gameState.farmingPlots.forEach((plot, index) => { [cite: 503]
                const plotDiv = document.createElement("div");
                plotDiv.className = "farming-plot";
                plotDiv.onclick = () => harvestPlot(index);
                
                if (plot === null) {
    
                    plotDiv.textContent = "üü´"; [cite: 504]
                } else if (plot.type === "potato") {
                    if (plot.ready) {
                        plotDiv.className += " ready";
           
                        plotDiv.textContent = "ü•î"; [cite: 505]
                    } else {
                        plotDiv.className += " planted";
                        plotDiv.textContent = "üå±";
          
                    } [cite: 506]
                } else if (plot.type === "oxygen-plant") {
                    if (plot.ready) {
                        plotDiv.className += " ready";
                   
                        plotDiv.textContent = "üåø"; [cite: 507]
                    } else {
                        plotDiv.className += " planted";
                        plotDiv.textContent = "üå±"; [cite: 508]
                    }
                }
                
                farmingGrid.appendChild(plotDiv); [cite: 509]
            });
        }

        function plantCrop(cropType) {
            const emptyPlot = gameState.farmingPlots.findIndex(plot => plot === null); [cite: 510]
            if (emptyPlot === -1) {
                showMessage("‚ùå N√£o h√° espa√ßo dispon√≠vel!"); [cite: 511]
                return;
            }
            
            if (cropType === "potato" && gameState.potatoSeeds > 0) {
                gameState.potatoSeeds--; [cite: 512]
                gameState.farmingPlots[emptyPlot] = {
                    type: "potato",
                    plantedAt: Date.now(),
                    ready: false
                }; [cite: 513]
                showMessage("ü•î Batata plantada!"); [cite: 513]
            } else if (cropType === "oxygen-plant" && gameState.oxygenSeeds > 0) {
                gameState.oxygenSeeds--; [cite: 514]
                gameState.farmingPlots[emptyPlot] = {
                    type: "oxygen-plant",
                    plantedAt: Date.now(),
                    ready: false
                }; [cite: 515]
                showMessage("üåø Planta de O¬≤ plantada!"); [cite: 515]
            } else {
                showMessage("‚ùå Sementes insuficientes!"); [cite: 516]
            }
            
            updateBunkerInterface(); [cite: 517]
        }

        function waterPlants() {
            if (gameState.water < 2) {
                showMessage("‚ùå √Ågua insuficiente! (Precisa de 2)"); [cite: 518]
                return;
            }
            
            gameState.water -= 2; [cite: 519]
            let wateredCount = 0; [cite: 519]
            
            gameState.farmingPlots.forEach(plot => {
                if (plot && !plot.ready) {
                    plot.plantedAt -= 30000; // Acelera crescimento
                    wateredCount++;
                }
            });
            if (wateredCount > 0) { [cite: 520]
                showMessage(`üíß Regou ${wateredCount} plantas! Crescimento acelerado.`); [cite: 521]
            } else {
                showMessage("‚ùå Nenhuma planta para regar!"); [cite: 522]
            }
            
            updateBunkerInterface(); [cite: 523]
        }

        function harvestPlot(index) {
            const plot = gameState.farmingPlots[index]; [cite: 524]
            if (!plot) {
                showMessage("‚ùå Nenhuma planta neste local!"); [cite: 525]
                return;
            }
            
            if (!plot.ready) {
                showMessage("‚ùå Planta ainda n√£o est√° pronta!"); [cite: 526]
                return;
            }
            
            if (player.inventory.length >= player.maxInventory) {
                showMessage("‚ùå Invent√°rio cheio!"); [cite: 527]
                return;
            }
            
            if (plot.type === "potato") {
                player.inventory.push("ü•î"); [cite: 528]
                gameState.potatoSeeds += 2; // Sementes extras
                missions[2].completed = true; [cite: 529]
                // Colheu batata
                updateMissions(); [cite: 530]
                showMessage("ü•î Colheu batata! +2 sementes extras"); [cite: 530]
            } else if (plot.type === "oxygen-plant") {
                player.oxygen = Math.min(100, player.oxygen + 15); [cite: 531]
                gameState.oxygenSeeds += 1; [cite: 531]
                showMessage("üåø Colheu planta de O¬≤! Oxig√™nio restaurado"); [cite: 532]
            }
            
            gameState.farmingPlots[index] = null; [cite: 533]
            updateBunkerInterface();
            updateSurvivalHUD();
        }

        function harvestAll() {
            let harvested = 0; [cite: 534]
            gameState.farmingPlots.forEach((plot, index) => { [cite: 534]
                if (plot && plot.ready && player.inventory.length < player.maxInventory) {
                    harvestPlot(index);
                    harvested++;
                }
            });
            if (harvested === 0) { [cite: 535]
                showMessage("‚ùå Nenhuma planta pronta ou invent√°rio cheio!"); [cite: 536]
            } else {
                showMessage(`üåæ Colheu ${harvested} plantas!`); [cite: 537]
            }
        }

        // Fun√ß√µes da oficina
        function craftItem(type) {
            switch(type) {
                case "medkit":
                    if (gameState.water >= 1 && player.inventory.includes("ü•î")) {
               
                        gameState.water--; [cite: 538]
                        player.inventory.splice(player.inventory.indexOf("ü•î"), 1);
                        player.hunger = Math.min(100, player.hunger + 20); [cite: 539]
                        player.health = Math.min(100, player.health + 30); [cite: 539]
                        showMessage("üíä Kit M√©dico criado e usado!"); [cite: 540]
                    } else {
                        showMessage("‚ùå Falta √Ågua ou Batata!"); [cite: 541]
                    }
                    break;
                case "filter": [cite: 542]
                    if (player.inventory.includes("üåø") && gameState.water >= 1) {
                        player.inventory.splice(player.inventory.indexOf("üåø"), 1); [cite: 543]
                        gameState.water--; [cite: 543]
                        player.oxygen = Math.min(100, player.oxygen + 30);
                        showMessage("üåø Filtro de O¬≤ criado e usado!"); [cite: 544]
                    } else {
                        showMessage("‚ùå Recurso insuficiente!"); [cite: 545]
                    }
                    break;
                case "solar": [cite: 546]
                    if (player.backpack && player.energy < 100) {
                        player.energy = Math.min(100, player.energy + 50); [cite: 547]
                        showMessage("‚ö° Painel Solar ativado! Energia restaurada."); [cite: 547]
                        missions[4].completed = true; // Reparo da nave
                        updateMissions(); [cite: 548]
                    } else if (!player.backpack) {
                        showMessage("‚ùå Voc√™ precisa de uma mochila equipada!"); [cite: 549]
                    } else {
                        showMessage("‚ùå Energia j√° est√° cheia!"); [cite: 550]
                    }
                    break;
            } [cite: 551]
            updateSurvivalHUD(); [cite: 552]
        }

        // Fun√ß√£o para fechar interfaces
        function closeInterface(interfaceId) {
            document.getElementById(interfaceId).style.display = "none"; [cite: 553]
        }

        // Sistema de sobreviv√™ncia
        function updateSurvival() {
            const now = Date.now(); [cite: 554]
            const timeDiff = (now - gameState.lastSurvivalUpdate) / 1000;
            
            if (timeDiff >= 5) { // Atualiza a cada 5 segundos
                player.hunger = Math.max(0, player.hunger - 1); [cite: 555]
                player.thirst = Math.max(0, player.thirst - 1.5); [cite: 555]
                player.oxygen = Math.max(0, player.oxygen - 0.5);
                player.energy = Math.max(0, player.energy - 0.8); [cite: 556]
                gameState.lastSurvivalUpdate = now; [cite: 556]
                updateSurvivalHUD();
                
                // Verificar condi√ß√µes cr√≠ticas
                if (player.hunger <= 0 || player.thirst <= 0 || player.oxygen <= 0) {
                    showMessage("üíÄ CR√çTICO! Voc√™ precisa de recursos urgentemente!"); [cite: 557]
                }
            }
        }

        function updateSurvivalHUD() {
            document.querySelector(".hunger").style.width = player.hunger + "%"; [cite: 558]
            document.querySelector(".thirst").style.width = player.thirst + "%";
            document.querySelector(".oxygen").style.width = player.oxygen + "%";
            document.querySelector(".energy").style.width = player.energy + "%"; [cite: 559]
        }

        // Atualizar crescimento das plantas
        function updatePlants() {
            const now = Date.now(); [cite: 560]
            gameState.farmingPlots.forEach(plot => {
                if (plot && !plot.ready) {
                    const growthTime = (now - plot.plantedAt) / 1000;
                    if (growthTime >= 60) { // 1 minuto para crescer
                      
                        plot.ready = true; [cite: 561]
                    }
                }
            }); [cite: 562]
        }

        // Sistema de Salvamento
        function saveGame() {
            const saveData = {
                player,
                gameState,
                missions,
                
                timeOfDay, [cite: 563]
                enemies
            }; [cite: 564]
            localStorage.setItem("zyroSave", JSON.stringify(saveData)); [cite: 564]
        }

        function loadGame() {
            const saved = localStorage.getItem("zyroSave"); [cite: 565]
            if (saved) { [cite: 565]
                try {
                    const data = JSON.parse(saved); [cite: 566]
                    Object.assign(player, data.player); [cite: 566]
                    Object.assign(gameState, data.gameState);
                    missions = data.missions || missions;
                    timeOfDay = data.timeOfDay || 12;
                    if (data.enemies) enemies = data.enemies; [cite: 567]
                    showMessage("üíæ Progresso carregado!"); [cite: 567]
                    updateMissions();
                    updateSurvivalHUD();
                } catch (e) {
                    console.log("Erro ao carregar save:", e); [cite: 568]
                }
            }
        }

        // Fun√ß√µes auxiliares
        function showMessage(text) {
            const existing = document.querySelector(".message"); [cite: 569]
            if (existing) existing.remove(); [cite: 569]
            
            const message = document.createElement("div");
            message.className = "message";
            message.textContent = text;
            message.style.cssText = ` [cite: 570]
                position: fixed; [cite: 571]
                top: 100px;
                left: 50%;
                transform: translateX(-50%);
                background: rgba(0, 0, 0, 0.9);
                color: #00bfff;
                padding: 10px 20px;
                border-radius: 10px;
                border: 2px solid #00bfff; [cite: 572]
                font-weight: bold;
                z-index: 1000;
                animation: fadeMessage 3s ease-in-out forwards;
            `;
            
            document.body.appendChild(message);
            setTimeout(() => message.remove(), 3000); [cite: 573]
        }

        function updateHUD() {
            const nearestPOI = findNearestPOI(); [cite: 574]
            if (nearestPOI) { [cite: 574]
                document.getElementById("hud").textContent = `Pr√≥ximo: ${nearestPOI.name}`; [cite: 575]
            } else {
                document.getElementById("hud").textContent = "√Årea: Planeta ZYRO"; [cite: 576]
            }
        }

        function findNearestPOI() {
            let nearest = null; [cite: 577]
            let minDistance = 100; [cite: 577]
            
            pointsOfInterest.forEach(poi => {
                let dx = player.x - poi.x;
                let dy = player.y - poi.y;
                let distance = Math.sqrt(dx * dx + dy * dy);
                
           
                if (distance < minDistance) { [cite: 578]
                    minDistance = distance;
                    nearest = poi;
                }
            });
            return nearest; [cite: 579]
        }

        // Loop principal
        function loop() {
            // Movimenta√ß√£o
            if (joy.x !== 0 || joy.y !== 0) {
                player.x += joy.x * player.speed; [cite: 580]
                player.y += joy.y * player.speed; [cite: 580]
                
                // Consumir energia ao se mover
                player.energy = Math.max(0, player.energy - 0.01); [cite: 581]
            }

            // Limites do mundo
            player.x = Math.max(player.r, Math.min(AREA_WIDTH - player.r, player.x)); [cite: 582]
            player.y = Math.max(player.r, Math.min(AREA_HEIGHT - player.r, player.y)); [cite: 582]

            // C√¢mera
            cam.x = Math.max(0, Math.min(AREA_WIDTH - canvas.width, player.x - canvas.width / 2)); [cite: 583]
            cam.y = Math.max(0, Math.min(AREA_HEIGHT - canvas.height, player.y - canvas.height / 2)); [cite: 584]
            // Atualizar sistemas
            updateSurvival();
            updatePlants();
            updateDayCycle();
            saveGame(); [cite: 585]
            // Limpar tela
            ctx.clearRect(0, 0, canvas.width, canvas.height); [cite: 586]
            // Desenhar mundo com offset da c√¢mera
            ctx.save(); [cite: 587]
            ctx.translate(-cam.x, -cam.y);

            // Desenhar fundo
            drawBackground(); [cite: 588]
            // Desenhar pontos de interesse
            drawPointsOfInterest(); [cite: 589]
            // Desenhar inimigos
            drawEnemies(); [cite: 590]
            // Desenhar player
            drawPlayer();

            ctx.restore();
            updateHUD();
            requestAnimationFrame(loop); [cite: 591]
        }

        function drawBackground() {
            // Fundo do planeta
            const gradient = ctx.createRadialGradient(AREA_WIDTH/2, AREA_HEIGHT/2, 0, AREA_WIDTH/2, AREA_HEIGHT/2, AREA_WIDTH); [cite: 592]
            gradient.addColorStop(0, "#4a5568");
            gradient.addColorStop(1, "#2d3748");
            ctx.fillStyle = gradient;
            ctx.fillRect(0, 0, AREA_WIDTH, AREA_HEIGHT); [cite: 593]
            // Grid de refer√™ncia
            ctx.strokeStyle = "rgba(255, 255, 255, 0.1)"; [cite: 594]
            ctx.lineWidth = 1;
            for (let x = 0; x <= AREA_WIDTH; x += 100) {
                ctx.beginPath(); [cite: 595]
                ctx.moveTo(x, 0);
                ctx.lineTo(x, AREA_HEIGHT);
                ctx.stroke();
            }
            for (let y = 0; y <= AREA_HEIGHT; y += 100) {
                ctx.beginPath(); [cite: 596]
                ctx.moveTo(0, y);
                ctx.lineTo(AREA_WIDTH, y);
                ctx.stroke();
            }
            
            // Caminhos conectando os pontos
            ctx.strokeStyle = "rgba(139, 115, 85, 0.6)"; [cite: 597]
            ctx.lineWidth = 8;
            ctx.beginPath();
            // Conectar nave com outros pontos
            ctx.moveTo(600, 400); [cite: 598]
            ctx.lineTo(200, 200); // Para mina de √°gua [cite: 598]
            ctx.moveTo(600, 400); [cite: 599]
            ctx.lineTo(1000, 200); // Para ponto de O¬≤ [cite: 599]
            ctx.moveTo(600, 400); [cite: 600]
            ctx.lineTo(200, 600); // Para bunker [cite: 600]
            ctx.moveTo(600, 400);
            ctx.lineTo(1000, 600); [cite: 601]
            // Para equipamentos
            ctx.moveTo(600, 400);
            ctx.lineTo(600, 700); [cite: 602]
            // Para oficina
            ctx.stroke(); [cite: 603]
        }

        function drawPointsOfInterest() {
            pointsOfInterest.forEach(poi => {
                // √Årea de intera√ß√£o
                let dx = player.x - poi.x;
                let dy = player.y - poi.y;
               
                let distance = Math.sqrt(dx * dx + dy * dy); [cite: 604]
                
                if (distance < 80) {
                    ctx.strokeStyle = "rgba(0, 255, 0, 0.5)";
                    ctx.lineWidth = 3;
       
                    ctx.beginPath(); [cite: 605]
                    ctx.arc(poi.x, poi.y, 80, 0, Math.PI * 2);
                    ctx.stroke();
                }
                
         
                // Base do ponto
                ctx.fillStyle = poi.color; [cite: 606]
                ctx.beginPath();
                ctx.arc(poi.x, poi.y, 40, 0, Math.PI * 2);
                ctx.fill();
                
  
                // Borda
                ctx.strokeStyle = "#ffffff"; [cite: 607]
                ctx.lineWidth = 3;
                ctx.stroke();
                
                // 
                // √çcone
                ctx.font = "30px Arial"; [cite: 608]
                ctx.fillStyle = "#ffffff"; [cite: 609]
                ctx.textAlign = "center";
                ctx.fillText(poi.icon, poi.x, poi.y + 10); [cite: 610]
                // Nome
                ctx.font = "14px Arial"; [cite: 611]
                ctx.fillStyle = "#ffffff"; [cite: 611]
                ctx.fillText(poi.name, poi.x, poi.y + 60); [cite: 611]
                
                // Efeito de pulso para pontos pr√≥ximos
                if (distance < 100) {
                    const pulse = Math.sin(Date.now() / 200) * 0.3 + 0.7; [cite: 612]
                    ctx.strokeStyle = `rgba(255, 255, 255, ${pulse})`; [cite: 612]
                    ctx.lineWidth = 2;
                    ctx.beginPath();
                    ctx.arc(poi.x, poi.y, 50, 0, Math.PI * 2);
                    ctx.stroke(); [cite: 613]
                }
            }); [cite: 614]
        }

        function drawPlayer() {
            // Sombra
            ctx.fillStyle = "rgba(0, 0, 0, 0.3)"; [cite: 615]
            ctx.beginPath();
            ctx.ellipse(player.x, player.y + player.r + 5, player.r * 0.8, player.r * 0.3, 0, 0, Math.PI * 2);
            ctx.fill(); [cite: 616]
            // Corpo do astronauta
            ctx.fillStyle = "#1e40af"; [cite: 617]
            ctx.beginPath(); [cite: 617]
            ctx.arc(player.x, player.y, player.r, 0, Math.PI * 2);
            ctx.fill();
            
            // Borda do traje
            ctx.strokeStyle = "#3b82f6"; [cite: 618]
            ctx.lineWidth = 4;
            ctx.stroke();

            // Visor do capacete
            ctx.fillStyle = "rgba(0, 191, 255, 0.8)"; [cite: 619]
            ctx.beginPath();
            ctx.arc(player.x, player.y - 3, player.r * 0.6, 0, Math.PI * 2);
            ctx.fill(); [cite: 620]
            // Reflexo no visor
            ctx.fillStyle = "rgba(255, 255, 255, 0.4)"; [cite: 621]
            ctx.beginPath();
            ctx.arc(player.x - 8, player.y - 8, player.r * 0.3, 0, Math.PI * 2);
            ctx.fill(); [cite: 622]
            // Mochila se equipada
            if (player.backpack) {
                ctx.fillStyle = "#8b4513"; [cite: 623]
                ctx.fillRect(player.x - 15, player.y + 10, 30, 20);
                ctx.strokeStyle = "#654321";
                ctx.lineWidth = 2; [cite: 624]
                ctx.strokeRect(player.x - 15, player.y + 10, 30, 20);
            }

            // Indicador de dire√ß√£o
            if (joy.x !== 0 || joy.y !== 0) {
                ctx.strokeStyle = "#00ff00"; [cite: 625]
                ctx.lineWidth = 3;
                ctx.beginPath();
                ctx.moveTo(player.x, player.y);
                ctx.lineTo(player.x + joy.x * 40, player.y + joy.y * 40);
                ctx.stroke(); [cite: 626]
                // Ponta da seta
                ctx.fillStyle = "#00ff00"; [cite: 627]
                ctx.beginPath();
                ctx.arc(player.x + joy.x * 40, player.y + joy.y * 40, 3, 0, Math.PI * 2);
                ctx.fill(); [cite: 628]
            }
            
            // Indicador de status cr√≠tico
            if (player.hunger <= 20 || player.thirst <= 20 || player.oxygen <= 20) {
                const flash = Math.sin(Date.now() / 200) > 0; [cite: 629]
                if (flash) { [cite: 629]
                    ctx.strokeStyle = "#ff0000"; [cite: 630]
                    ctx.lineWidth = 3;
                    ctx.beginPath();
                    ctx.arc(player.x, player.y, player.r + 10, 0, Math.PI * 2);
                    ctx.stroke(); [cite: 631]
                }
            }
            
            // Barra de vida se ferido
            if (player.health < 100) {
                ctx.fillStyle = "rgba(0, 0, 0, 0.7)"; [cite: 632]
                ctx.fillRect(player.x - 30, player.y - 45, 60, 8);
                ctx.fillStyle = "#ff0000"; [cite: 633]
                ctx.fillRect(player.x - 28, player.y - 43, (player.health / 100) * 56, 4); [cite: 634]
            }
        }

        // Inicializa√ß√£o
        loadGame(); [cite: 635]
        updateMissions(); [cite: 635]
        showMessage("üöÄ Bem-vindo ao ZYRO v0.2! Sobreviva e complete as miss√µes!");
        loop(); [cite: 636]
        // Preven√ß√£o de scroll
        document.addEventListener('touchmove', function(e) {
            e.preventDefault();
        }, { passive: false }); [cite: 637]
        console.log("üåç ZYRO v0.2 - Sistema completo carregado!"); [cite: 637]
        console.log("üéÆ Novidades: Miss√µesüìú Dia/Noiteüåó Inimigosüëæ Oficinaüîß Salvamentoüíæ"); [cite: 638]
        </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'98ac29bfe648f1ff',t:'MTc1OTgyNzE1NC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
    </html>
